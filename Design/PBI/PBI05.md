# PBI #5: 通貨変換・CSVエクスポート機能

## プロダクトバックログアイテム

**タイトル**: 日本円表示とデータエクスポート機能実装

**ユーザーストーリー**: 
経理担当者として、円建てでコストを確認しCSVで保存したい、なぜなら社内の予算管理システムと連携したいから

**ビジネス価値**: 
日本企業での利用促進と、既存業務フローへの統合を実現

**受け入れ基準**:
- [ ] 為替レート設定機能（デフォルト150円/ドル）
- [ ] グラフのY軸を円表示に切り替え可能
- [ ] 計算結果をCSV形式でダウンロード
- [ ] CSVに全パラメータと計算結果を含む

**見積もり**: 3ポイント

**備考**: 
- 依存関係: PBI #2, #3, #4（基本機能の完成）
- 技術的考慮事項:
  - 為替レートの更新性
  - CSVフォーマットの標準化
  - 文字エンコーディング（日本語対応）

## 実装詳細

### 通貨変換機能
- **為替レート入力**: 
  - デフォルト: 150 JPY/USD
  - 入力範囲: 50-300円
  - リアルタイム再計算
- **表示切り替え**:
  - USD/JPY トグルボタン
  - グラフY軸の自動更新
  - 数値フォーマット（カンマ区切り）

### CSVエクスポート仕様

#### ファイル名
`cost_comparison_YYYYMMDD_HHMMSS.csv`

#### CSVフォーマット
```csv
"AWS Lambda vs VM Cost Comparison Report"
"Generated Date","2024-01-20 15:30:00"
"Exchange Rate","150 JPY/USD"

"Lambda Configuration"
"Memory (MB)","Execution Time (sec)","Monthly Executions"
"512","10","1000000"

"Cost Comparison"
"Executions/Month","Lambda Cost (USD)","Lambda Cost (JPY)","EC2 t3.small (USD)","EC2 t3.small (JPY)","Sakura 2core/4GB (JPY)"
"0","0","0","19.58","2,937","4,180"
"1000","0.02","3","19.58","2,937","4,180"
"10000","0.20","30","19.58","2,937","4,180"
...

"Break-even Points"
"Service","Executions/Month","Executions/Second"
"EC2 t3.small","979,000","0.38"
"Sakura Cloud","1,393,333","0.54"
```

### UI実装
- **為替レート設定**:
  - ヘッダー部に数値入力フィールド
  - 「適用」ボタンで再計算
- **通貨切り替え**:
  - USD/JPYトグルスイッチ
  - 選択状態の視覚的フィードバック
- **CSVダウンロード**:
  - 「CSVエクスポート」ボタン
  - ダウンロード完了通知

### エラーハンドリング
- 無効な為替レート入力の検証
- CSV生成エラーの通知
- ブラウザ互換性の確保