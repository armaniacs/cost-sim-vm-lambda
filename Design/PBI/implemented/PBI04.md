# PBI #4: コスト比較グラフ表示機能

## プロダクトバックログアイテム

**タイトル**: Lambda vs VMのコスト比較グラフ実装

**ユーザーストーリー**: 
意思決定者として、実行回数によるコスト推移を視覚的に比較したい、なぜならブレークイーブンポイントを直感的に理解したいから

**ビジネス価値**: 
視覚的な比較により、最適なインフラ選択の意思決定を迅速化

**受け入れ基準**:
- [ ] X軸：実行回数（月間・秒間）、Y軸：コスト（USD）のグラフ表示
- [ ] Lambda・EC2・さくらクラウドの3本線を同時表示
- [ ] ブレークイーブンポイントの明示
- [ ] マウスホバーで詳細数値表示

**見積もり**: 5ポイント

**備考**: 
- 依存関係: PBI #2, #3（コスト計算機能）
- 技術的考慮事項:
  - インタラクティブなグラフ操作
  - レスポンシブデザイン
  - パフォーマンス最適化

## 実装詳細

### グラフ仕様
- **グラフタイプ**: 折れ線グラフ
- **X軸**: 
  - 対数スケール対応
  - 月間実行回数（0〜10億回）
  - 秒間実行回数（0〜1000回/秒）の切り替え
- **Y軸**: 
  - コスト（USD）
  - 線形スケール

### 表示要素
1. **Lambda曲線**（青）: 実行回数に比例して増加
2. **EC2水平線**（緑）: 固定コスト
3. **さくらクラウド水平線**（オレンジ）: 固定コスト
4. **ブレークイーブンポイント**: 交点に垂直線とラベル

### インタラクティブ機能
- **ズーム/パン**: グラフの拡大・移動
- **ホバー情報**: 
  - 実行回数
  - 各サービスのコスト
  - 差額
- **凡例**: クリックで表示/非表示切り替え

### 計算ロジック
```javascript
// X軸の範囲設定（対数的に増加）
const executionCounts = [0, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9];

// 各ポイントでコスト計算
for (count of executionCounts) {
  lambdaCost = calculateLambdaCost(memory, duration, count);
  ec2Cost = EC2_MONTHLY_COST;
  sakuraCost = SAKURA_MONTHLY_COST;
}

// ブレークイーブンポイント計算
breakEvenEC2 = findIntersection(lambdaCost, ec2Cost);
breakEvenSakura = findIntersection(lambdaCost, sakuraCost);
```

### UI/UX要件
- グラフサイズ: レスポンシブ（最小600x400px）
- 配色: アクセシビリティ考慮
- アニメーション: 初回描画時のスムーズな表示
- エクスポート: グラフ画像の保存機能（PNG/SVG）