# 技術スタック選定レポート

## 選定概要

このプロジェクトでは、t_wada流TDD（Test-Driven Development）を採用し、テスト容易性と保守性を重視した技術選定を行いました。

## Webフレームワーク選定

### 比較対象
1. **Flask** 
2. **FastAPI**

### 評価基準
- 学習コストの低さ
- テスト容易性
- プロジェクト規模との適合性
- 開発速度

### 選定結果: Flask

#### 選定理由
- **シンプル性**: 小規模なコスト計算アプリに最適
- **テスト容易性**: pytest-flaskによる優れたテストサポート
- **柔軟性**: 必要な機能のみを追加可能
- **学習コスト**: 短期間でのプロトタイプ開発に適している

#### FastAPIを選ばなかった理由
- オーバースペック: 本プロジェクトには高機能すぎる
- 学習コスト: 型ヒントの複雑性
- プロジェクト規模: 小規模アプリには重い

## テスティングフレームワーク選定

### 選定結果
- **pytest**: メインテストフレームワーク
- **pytest-flask**: Flask統合テスト
- **coverage.py**: カバレッジ測定
- **pytest-mock**: モッキング支援

#### 選定理由
- t_wada流TDDとの相性
- 豊富なプラグインエコシステム
- 読みやすいテストコード
- 詳細なテストレポート

## フロントエンド技術選定

### グラフ描画ライブラリ

#### 選定結果: Chart.js

#### 比較検討
1. **Chart.js**
   - ✅ 軽量・高速
   - ✅ インタラクティブ機能豊富
   - ✅ テスト可能（Jest対応）
   - ✅ レスポンシブ対応

2. **Plotly**
   - ❌ 大きなファイルサイズ
   - ❌ 複雑な設定
   - ✅ 高機能

3. **Matplotlib + mpld3**
   - ❌ パフォーマンス課題
   - ❌ インタラクティブ性に制限
   - ✅ Pythonネイティブ

#### Chart.js選定理由
- リアルタイム更新対応
- 軽量でパフォーマンス優秀
- ユニットテストが書きやすい
- ブレークイーブンポイント表示に最適

## 開発・品質管理ツール

### 環境管理
- **mise**: Python/Node.jsなどの統一管理
  - 高速な環境切り替え
  - チーム環境の統一
  - 自動的な依存関係管理

### コード品質
- **black**: コードフォーマッター
- **flake8**: リンター  
- **isort**: import文整理
- **mypy**: 型チェック

### テスト・CI/CD
- **pytest**: テスト実行
- **coverage**: カバレッジ測定
- **pre-commit**: Git hooksによる品質ゲート
- **GitHub Actions**: CI/CDパイプライン（mise統合）

## TDD開発プロセス

### Red-Green-Refactorサイクル
1. **Red**: 失敗するテストを先に書く
2. **Green**: テストを通す最小限の実装
3. **Refactor**: コード品質向上

### 品質ゲート
- テストカバレッジ: 80%以上
- 全テスト成功
- リントエラー: 0件
- 型チェックエラー: 0件

## 期待される効果
- 高品質なコード
- 安全なリファクタリング
- バグの早期発見
- 保守性の向上