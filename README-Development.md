# é–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

AWS Lambda vs VM Cost Simulatorã®é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ã¨é–‹ç™ºæ‰‹é †

## é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶
- [mise](https://mise.jdx.dev/) ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

1. **Pythonç’°å¢ƒã®è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
   ```bash
   mise install
   ```

2. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```bash
   mise run install
   ```

3. **pre-commitãƒ•ãƒƒã‚¯ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```bash
   mise run pre-commit-install
   ```

### é–‹ç™ºç”¨ã‚³ãƒãƒ³ãƒ‰

**ğŸš€ Makeã‚³ãƒãƒ³ãƒ‰ï¼ˆæ¨å¥¨ï¼‰**
```bash
# æ—¥å¸¸çš„ãªé–‹ç™ºä½œæ¥­
make test       # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãï¼‰
make lint       # ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
make format     # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
make dev        # é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆhttp://localhost:5001ï¼‰
make check      # å…¨ãƒã‚§ãƒƒã‚¯ï¼ˆformat + lint + testï¼‰

# çŸ­ç¸®ã‚³ãƒãƒ³ãƒ‰
make t          # test
make l          # lint  
make f          # format

# ç’°å¢ƒç®¡ç†
make setup      # åˆå›ç’°å¢ƒæ§‹ç¯‰
make clean      # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
make status     # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ³ç¢ºèª
```

**miseç›´æ¥ã‚³ãƒãƒ³ãƒ‰**
```bash
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
mise run test           # å…¨ãƒ†ã‚¹ãƒˆ + ã‚«ãƒãƒ¬ãƒƒã‚¸
mise run test-unit      # å˜ä½“ãƒ†ã‚¹ãƒˆã®ã¿

# ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
mise run lint           # ãƒªãƒ³ãƒˆå®Ÿè¡Œ
mise run format         # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
mise run dev            # http://localhost:5001 ã§èµ·å‹•

# ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
mise run clean
```

### é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹
```bash
# é–‹ç™ºé–‹å§‹æ™‚
make setup              # åˆå›ã®ã¿

# æ—¥å¸¸ã®é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«
make dev               # é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆhttp://localhost:5001ï¼‰
make t                 # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
make f                 # ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

# ã‚³ãƒŸãƒƒãƒˆå‰
make check             # å…¨ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
git add . && git commit -m "feature: add new functionality"
```

## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
```bash
# åŸºæœ¬èµ·å‹•ï¼ˆãƒãƒ¼ãƒˆ5001ï¼‰
make dev

# åˆ¥ãƒãƒ¼ãƒˆæŒ‡å®šï¼ˆä¾‹ï¼šãƒãƒ¼ãƒˆ8000ï¼‰
PORT=8000 make dev

# ç›´æ¥èµ·å‹•
python app/main.py
```

**ã‚¢ã‚¯ã‚»ã‚¹URL**: http://localhost:5001

**ãƒãƒ¼ãƒˆç«¶åˆæ™‚ã®å¯¾å‡¦**:
```bash
# ä½¿ç”¨ä¸­ãƒãƒ¼ãƒˆã®ç¢ºèª
lsof -i :5001

# ç’°å¢ƒå¤‰æ•°ã§åˆ¥ãƒãƒ¼ãƒˆæŒ‡å®š
PORT=8000 make dev
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
cost-sim-vm-lambda/
â”œâ”€â”€ app/                    # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ main.py            # Flask ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ config.py          # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
â”‚   â”œâ”€â”€ api/               # REST API
â”‚   â”‚   â””â”€â”€ calculator_api.py
â”‚   â”œâ”€â”€ models/            # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ lambda_calculator.py
â”‚   â”‚   â””â”€â”€ vm_calculator.py
â”‚   â”œâ”€â”€ templates/         # HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ base.html
â”‚   â”‚   â””â”€â”€ index.html
â”‚   â””â”€â”€ static/            # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚       â”œâ”€â”€ css/
â”‚       â””â”€â”€ js/
â”œâ”€â”€ tests/                 # ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ Design/                # è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ ref/                   # ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ Makefile              # é–‹ç™ºã‚³ãƒãƒ³ãƒ‰
â”œâ”€â”€ pyproject.toml        # Python ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â””â”€â”€ .mise.toml            # mise è¨­å®š
```

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Python 3.11+**: ãƒ¡ã‚¤ãƒ³è¨€èª
- **Flask**: Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Flask-CORS**: CORSå¯¾å¿œ
- **pytest**: ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **pytest-cov**: ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Bootstrap 5**: UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Chart.js**: ã‚°ãƒ©ãƒ•æç”»
- **Bootstrap Icons**: ã‚¢ã‚¤ã‚³ãƒ³

### é–‹ç™ºãƒ„ãƒ¼ãƒ«
- **mise**: é–‹ç™ºç’°å¢ƒç®¡ç†
- **ruff**: ãƒªãƒ³ã‚¿ãƒ¼ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼
- **mypy**: å‹ãƒã‚§ãƒƒã‚¯
- **pre-commit**: Git ãƒ•ãƒƒã‚¯
- **bandit**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯

## é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ã‚³ãƒ¼ãƒ‰å“è³ª
```bash
# ã‚³ãƒŸãƒƒãƒˆå‰ã«å¿…ãšå®Ÿè¡Œ
make check              # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ + ãƒªãƒ³ãƒˆ + ãƒ†ã‚¹ãƒˆ
```

### ãƒ†ã‚¹ãƒˆ
- å˜ä½“ãƒ†ã‚¹ãƒˆ: `tests/unit/`
- çµ±åˆãƒ†ã‚¹ãƒˆ: `tests/integration/`
- ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™: 90%ä»¥ä¸Š

### ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«
- **ruff**: PEP 8æº–æ‹ 
- **mypy**: å‹ãƒ’ãƒ³ãƒˆå¿…é ˆ
- **docstring**: é–¢æ•°ãƒ»ã‚¯ãƒ©ã‚¹ã«å¿…é ˆ

### Git ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
```bash
# æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout -b feature/new-functionality

# é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ
make dev
make check

# ã‚³ãƒŸãƒƒãƒˆ
git add .
git commit -m "feature: add new functionality"

# ãƒ—ãƒƒã‚·ãƒ¥
git push origin feature/new-functionality
```

## APIä»•æ§˜

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- `POST /api/v1/calculator/lambda` - Lambda ã‚³ã‚¹ãƒˆè¨ˆç®—
- `POST /api/v1/calculator/vm` - VM ã‚³ã‚¹ãƒˆè¨ˆç®—
- `POST /api/v1/calculator/comparison` - ã‚³ã‚¹ãƒˆæ¯”è¼ƒ
- `GET /api/v1/calculator/instances` - åˆ©ç”¨å¯èƒ½ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å–å¾—

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
```json
{
  "success": true,
  "data": {
    "comparison_data": [...],
    "break_even_points": [...]
  }
}
```

## ãƒ‡ãƒãƒƒã‚°

### ãƒ­ã‚°ç¢ºèª
```bash
# Flask ãƒ­ã‚°
tail -f app.log

# ãƒ†ã‚¹ãƒˆãƒ­ã‚°
pytest -v -s
```

### ãƒ–ãƒ©ã‚¦ã‚¶ãƒ‡ãƒãƒƒã‚°
1. F12ã§é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã
2. Consoleã‚¿ãƒ–ã§ã‚¨ãƒ©ãƒ¼ç¢ºèª
3. Networkã‚¿ãƒ–ã§apié€šä¿¡ç¢ºèª

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### miseé–¢é€£
```bash
# mise ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
mise --version

# Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
mise current python
```

### ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼
```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
make clean

# å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
mise run install
```

### ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼
```bash
# è©³ç´°ãƒ­ã‚°ä»˜ããƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest -v -s --tb=long
```

## ãƒ‡ãƒ—ãƒ­ã‚¤

### æœ¬ç•ªç’°å¢ƒæº–å‚™
```bash
# æœ¬ç•ªç”¨ä¾å­˜é–¢ä¿‚ã®ã¿ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# ç’°å¢ƒå¤‰æ•°è¨­å®š
export FLASK_ENV=production
export PORT=5001
```

### Dockerï¼ˆå°†æ¥å®Ÿè£…äºˆå®šï¼‰
```bash
# ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
docker build -t cost-simulator .

# ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•
docker run -p 5001:5001 cost-simulator
```

## å‚è€ƒè³‡æ–™

- **è¨­è¨ˆä»•æ§˜**: [Design/Overview.md](Design/Overview.md)
- **ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹**: [ref/README.md](ref/README.md)
- **APIä»•æ§˜**: [ref/api-reference.md](ref/api-reference.md)
- **ãƒ†ã‚¹ãƒˆæˆ¦ç•¥**: [ref/testing-strategy.md](ref/testing-strategy.md)